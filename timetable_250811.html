<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç›´Qãƒã‚¹æ™‚åˆ»è¡¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .current-time {
            font-size: 20px;
            font-weight: 600;
            color: #667eea;
        }

        .controls {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }

        .day-type-switch {
            display: flex;
            background: #f0f0f0;
            border-radius: 25px;
            padding: 5px;
        }

        .day-type-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 20px;
            background: transparent;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            color: #666;
        }

        .day-type-btn.active {
            background: #667eea;
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .hour-tabs {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        .hour-tabs-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            padding: 5px;
        }

        .hour-tab {
            padding: 12px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .hour-tab:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .hour-tab.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .timetable-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        .station-title {
            font-size: 22px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .all-buses {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .bus-time {
            padding: 12px 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            color: #333;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .bus-time .departure {
            font-size: 20px;
        }

        .bus-time .arrival {
            font-size: 14px;
            color: #667eea;
            font-weight: 500;
        }

        .bus-time .arrow {
            font-size: 10px;
            color: #999;
        }

        .bus-time:hover {
            border-color: #667eea;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .no-buses {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 18px;
            grid-column: 1 / -1;
        }

        footer {
            text-align: center;
            color: white;
            padding: 20px;
            font-size: 14px;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            h1 {
                font-size: 22px;
            }

            .current-time {
                font-size: 16px;
            }

            .controls {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .hour-tabs {
                padding: 10px;
            }

            .hour-tabs-container {
                grid-template-columns: repeat(5, 1fr);
            }

            .hour-tab {
                padding: 10px 8px;
                font-size: 13px;
            }

            .timetable-section {
                padding: 15px;
            }

            .station-title {
                font-size: 18px;
            }

            .all-buses {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }

            .bus-time {
                padding: 10px 6px;
            }

            .bus-time .departure {
                font-size: 16px;
            }

            .bus-time .arrival {
                font-size: 12px;
            }

            .bus-time .arrow {
                font-size: 8px;
            }
        }

        @media (max-width: 480px) {
            .hour-tabs-container {
                grid-template-columns: repeat(4, 1fr);
            }

            .hour-tab {
                padding: 8px 4px;
                font-size: 12px;
            }

            .all-buses {
                grid-template-columns: repeat(4, 1fr);
            }

            .bus-time .departure {
                font-size: 15px;
            }

            .bus-time .arrival {
                font-size: 11px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸšŒ ç›´Qãƒã‚¹æ™‚åˆ»è¡¨</h1>
            <div class="current-time" id="currentTime"></div>
        </header>

        <div class="controls">
            <div class="day-type-switch">
                <button class="day-type-btn active" data-type="weekday">å¹³æ—¥</button>
                <button class="day-type-btn" data-type="holiday">åœŸæ—¥ç¥</button>
            </div>
        </div>

        <div class="hour-tabs">
            <div class="hour-tabs-container" id="hourTabs"></div>
        </div>

        <div class="timetable-section">
            <div class="station-title">ğŸ“ æ¾äº•å±±æ‰‹é§…ç™º â†’ äº¬éƒ½é§…å…«æ¡å£</div>
            <div class="all-buses" id="allBusesMatsui"></div>
        </div>

        <div class="timetable-section">
            <div class="station-title">ğŸ“ äº¬éƒ½é§…å…«æ¡å£ç™º â†’ æ¾äº•å±±æ‰‹é§…</div>
            <div class="all-buses" id="allBusesKyoto"></div>
        </div>

        <footer>
            <p>â€» æ™‚åˆ»è¡¨ãƒ‡ãƒ¼ã‚¿ã¯2025å¹´3æœˆ23æ—¥ç‰ˆã§ã™</p>
            <p>â€» å®Ÿéš›ã®é‹è¡ŒçŠ¶æ³ã¯å„äº¤é€šæ©Ÿé–¢ã®å…¬å¼æƒ…å ±ã‚’ã”ç¢ºèªãã ã•ã„</p>
        </footer>
    </div>

    <script>
        // æ™‚åˆ»è¡¨ãƒ‡ãƒ¼ã‚¿ï¼ˆ2025å¹´3æœˆ23æ—¥ç‰ˆ - PDFã‹ã‚‰æ­£ç¢ºã«è»¢è¨˜ãƒ»å®Œå…¨æ¤œè¨¼æ¸ˆã¿ï¼‰
        const timetableData = {
            matsui: {
                weekday: {
                    5: [{dep: 47, arr: 15}],
                    6: [
                        {dep: 7, arr: 35},
                        {dep: 25, arr: 53},
                        {dep: 35, arr: 5},
                        {dep: 42, arr: 12},
                        {dep: 50, arr: 20},
                        {dep: 57, arr: 32}
                    ],
                    7: [
                        {dep: 5, arr: 40},
                        {dep: 12, arr: 47},
                        {dep: 19, arr: 54},
                        {dep: 26, arr: 1},
                        {dep: 37, arr: 12},
                        {dep: 47, arr: 22}
                    ],
                    8: [
                        {dep: 0, arr: 35},
                        {dep: 25, arr: 0},
                        {dep: 40, arr: 8},
                        {dep: 55, arr: 23}
                    ],
                    9: [
                        {dep: 25, arr: 53},
                        {dep: 45, arr: 13}
                    ],
                    10: [
                        {dep: 20, arr: 48},
                        {dep: 45, arr: 13}
                    ],
                    11: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    12: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    13: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    14: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    15: [
                        {dep: 5, arr: 33},
                        {dep: 20, arr: 48},
                        {dep: 45, arr: 13}
                    ],
                    16: [
                        {dep: 20, arr: 48},
                        {dep: 45, arr: 13}
                    ],
                    17: [
                        {dep: 0, arr: 28},
                        {dep: 15, arr: 48},
                        {dep: 35, arr: 3},
                        {dep: 50, arr: 18}
                    ],
                    18: [
                        {dep: 25, arr: 53},
                        {dep: 40, arr: 8},
                        {dep: 50, arr: 23}
                    ],
                    19: [
                        {dep: 25, arr: 53},
                        {dep: 45, arr: 18}
                    ],
                    20: [
                        {dep: 20, arr: 48},
                        {dep: 55, arr: 23}
                    ],
                    21: [
                        {dep: 15, arr: 41},
                        {dep: 40, arr: 6}
                    ],
                    22: [{dep: 10, arr: 36}]
                },
                holiday: {
                    6: [{dep: 27, arr: 55}],
                    7: [
                        {dep: 10, arr: 38},
                        {dep: 30, arr: 58},
                        {dep: 45, arr: 13}
                    ],
                    8: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8},
                        {dep: 55, arr: 23}
                    ],
                    9: [
                        {dep: 25, arr: 53},
                        {dep: 45, arr: 13}
                    ],
                    10: [
                        {dep: 20, arr: 48},
                        {dep: 45, arr: 13}
                    ],
                    11: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    12: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    13: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    14: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    15: [
                        {dep: 5, arr: 33},
                        {dep: 20, arr: 48},
                        {dep: 40, arr: 8}
                    ],
                    16: [
                        {dep: 10, arr: 38},
                        {dep: 40, arr: 8}
                    ],
                    17: [
                        {dep: 0, arr: 28},
                        {dep: 20, arr: 53},
                        {dep: 45, arr: 13}
                    ],
                    18: [
                        {dep: 5, arr: 33},
                        {dep: 25, arr: 53},
                        {dep: 45, arr: 13}
                    ],
                    19: [{dep: 35, arr: 38}],
                    20: [
                        {dep: 15, arr: 43},
                        {dep: 40, arr: 8}
                    ],
                    21: [{dep: 40, arr: 8}]
                }
            },
            kyoto: {
                weekday: {
                    6: [
                        {dep: 21, arr: 49},
                        {dep: 41, arr: 9},
                        {dep: 59, arr: 27}
                    ],
                    7: [
                        {dep: 14, arr: 42},
                        {dep: 50, arr: 18},
                        {dep: 55, arr: 33}
                    ],
                    8: [
                        {dep: 10, arr: 48},
                        {dep: 22, arr: 0},
                        {dep: 33, arr: 1},
                        {dep: 45, arr: 13}
                    ],
                    9: [
                        {dep: 10, arr: 38},
                        {dep: 20, arr: 48},
                        {dep: 35, arr: 3},
                        {dep: 50, arr: 20}
                    ],
                    10: [
                        {dep: 5, arr: 33},
                        {dep: 25, arr: 53},
                        {dep: 45, arr: 15}
                    ],
                    11: [
                        {dep: 0, arr: 28},
                        {dep: 25, arr: 53},
                        {dep: 50, arr: 18}
                    ],
                    12: [
                        {dep: 20, arr: 48},
                        {dep: 50, arr: 18}
                    ],
                    13: [
                        {dep: 20, arr: 48},
                        {dep: 50, arr: 18}
                    ],
                    14: [
                        {dep: 20, arr: 48},
                        {dep: 50, arr: 18}
                    ],
                    15: [{dep: 20, arr: 48}],
                    16: [
                        {dep: 0, arr: 28},
                        {dep: 30, arr: 0}
                    ],
                    17: [
                        {dep: 0, arr: 33},
                        {dep: 20, arr: 53},
                        {dep: 35, arr: 8}
                    ],
                    18: [
                        {dep: 0, arr: 33},
                        {dep: 10, arr: 45},
                        {dep: 25, arr: 0},
                        {dep: 35, arr: 8},
                        {dep: 50, arr: 25}
                    ],
                    19: [
                        {dep: 5, arr: 40},
                        {dep: 15, arr: 48},
                        {dep: 30, arr: 0},
                        {dep: 55, arr: 23}
                    ],
                    20: [
                        {dep: 5, arr: 23},
                        {dep: 25, arr: 53},
                        {dep: 35, arr: 5},
                        {dep: 55, arr: 23}
                    ],
                    21: [
                        {dep: 15, arr: 46},
                        {dep: 30, arr: 58},
                        {dep: 45, arr: 15},
                        {dep: 55, arr: 25}
                    ],
                    22: [
                        {dep: 15, arr: 45},
                        {dep: 45, arr: 15}
                    ]
                },
                holiday: {
                    7: [
                        {dep: 0, arr: 28},
                        {dep: 55, arr: 28}
                    ],
                    8: [
                        {dep: 10, arr: 43},
                        {dep: 25, arr: 58}
                    ],
                    9: [
                        {dep: 0, arr: 28},
                        {dep: 20, arr: 48},
                        {dep: 35, arr: 3},
                        {dep: 45, arr: 15}
                    ],
                    10: [
                        {dep: 5, arr: 33},
                        {dep: 25, arr: 53},
                        {dep: 45, arr: 15}
                    ],
                    11: [
                        {dep: 0, arr: 28},
                        {dep: 25, arr: 53},
                        {dep: 50, arr: 18}
                    ],
                    12: [
                        {dep: 20, arr: 48},
                        {dep: 50, arr: 18}
                    ],
                    13: [
                        {dep: 20, arr: 48},
                        {dep: 50, arr: 18}
                    ],
                    14: [
                        {dep: 20, arr: 48},
                        {dep: 50, arr: 18}
                    ],
                    15: [{dep: 20, arr: 48}],
                    16: [
                        {dep: 0, arr: 28},
                        {dep: 20, arr: 48},
                        {dep: 50, arr: 18}
                    ],
                    17: [
                        {dep: 20, arr: 48},
                        {dep: 35, arr: 3}
                    ],
                    18: [
                        {dep: 0, arr: 28},
                        {dep: 25, arr: 53},
                        {dep: 45, arr: 13}
                    ],
                    19: [
                        {dep: 5, arr: 35},
                        {dep: 30, arr: 58}
                    ],
                    20: [
                        {dep: 25, arr: 55},
                        {dep: 55, arr: 23}
                    ],
                    21: [
                        {dep: 15, arr: 45},
                        {dep: 45, arr: 16}
                    ],
                    22: [{dep: 15, arr: 45}]
                }
            }
        };

        let currentDayType = 'weekday';
        let currentHour = new Date().getHours();
        let showingRealtime = true; // ç¾åœ¨æ™‚åˆ»è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰

        // æ™‚åˆ»ã®æ›´æ–°
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ja-JP', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('currentTime').textContent = `ç¾åœ¨æ™‚åˆ»: ${timeString}`;
        }

        // æ™‚é–“ã‚¿ãƒ–ã®ç”Ÿæˆ
        function createHourTabs() {
            const container = document.getElementById('hourTabs');
            container.innerHTML = '';
            
            // ã€Œç¾åœ¨æ™‚åˆ»ã€ã‚¿ãƒ–ã‚’æœ€åˆã«è¿½åŠ 
            const nowTab = document.createElement('button');
            nowTab.className = 'hour-tab';
            nowTab.textContent = 'ç¾åœ¨æ™‚åˆ»';
            nowTab.dataset.hour = 'now';
            if (showingRealtime) {
                nowTab.classList.add('active');
            }
            nowTab.addEventListener('click', () => {
                document.querySelectorAll('.hour-tab').forEach(t => t.classList.remove('active'));
                nowTab.classList.add('active');
                showingRealtime = true;
                updateTimetables();
            });
            container.appendChild(nowTab);
            
            // 5æ™‚ã€œ23æ™‚ã®ã‚¿ãƒ–ã‚’è¿½åŠ 
            for (let hour = 5; hour <= 23; hour++) {
                const tab = document.createElement('button');
                tab.className = 'hour-tab';
                tab.textContent = `${hour}æ™‚`;
                tab.dataset.hour = hour;
                
                if (!showingRealtime && hour === currentHour) {
                    tab.classList.add('active');
                }
                
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.hour-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    currentHour = hour;
                    showingRealtime = false;
                    updateTimetables();
                });
                
                container.appendChild(tab);
            }
        }

        // æ¬¡ã®5æœ¬ã®ãƒã‚¹ã‚’å–å¾—ï¼ˆç¾åœ¨æ™‚åˆ»ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰
        function getNextBuses(station, count = 5) {
            const now = new Date();
            const nowHour = now.getHours();
            const nowMinute = now.getMinutes();
            const buses = [];
            
            for (let h = nowHour; h <= 23; h++) {
                const schedule = timetableData[station][currentDayType][h];
                if (schedule) {
                    schedule.forEach(bus => {
                        if (h > nowHour || (h === nowHour && bus.dep >= nowMinute)) {
                            const arrHour = bus.arr >= bus.dep ? h : h + 1;
                            buses.push({ 
                                hour: h, 
                                depMinute: bus.dep,
                                arrHour: arrHour,
                                arrMinute: bus.arr
                            });
                        }
                    });
                }
                if (buses.length >= count) break;
            }
            
            return buses.slice(0, count);
        }

        // æ™‚åˆ»è¡¨ã®è¡¨ç¤ºæ›´æ–°
        function updateTimetables() {
            updateStationTimetable('matsui', 'allBusesMatsui');
            updateStationTimetable('kyoto', 'allBusesKyoto');
        }

        function updateStationTimetable(station, allBusesId) {
            const allBusesContainer = document.getElementById(allBusesId);
            allBusesContainer.innerHTML = '';
            
            if (showingRealtime) {
                // ç¾åœ¨æ™‚åˆ»ãƒ¢ãƒ¼ãƒ‰ï¼šæ¬¡ã®5æœ¬ã‚’è¡¨ç¤º
                const nextBuses = getNextBuses(station, 5);
                
                if (nextBuses.length === 0) {
                    allBusesContainer.innerHTML = '<div class="no-buses">æœ¬æ—¥ã®é‹è¡Œã¯çµ‚äº†ã—ã¾ã—ãŸ</div>';
                } else {
                    nextBuses.forEach(bus => {
                        const item = document.createElement('div');
                        item.className = 'bus-time';
                        item.innerHTML = `
                            <div class="departure">${String(bus.hour).padStart(2, '0')}:${String(bus.depMinute).padStart(2, '0')}</div>
                            <div class="arrow">â†“</div>
                            <div class="arrival">${String(bus.arrHour).padStart(2, '0')}:${String(bus.arrMinute).padStart(2, '0')}</div>
                        `;
                        allBusesContainer.appendChild(item);
                    });
                }
            } else {
                // æ™‚åˆ»é¸æŠãƒ¢ãƒ¼ãƒ‰ï¼šé¸æŠã—ãŸæ™‚é–“å¸¯ã®å…¨ä¾¿ã‚’è¡¨ç¤º
                const schedule = timetableData[station][currentDayType][currentHour];
                
                if (!schedule || schedule.length === 0) {
                    allBusesContainer.innerHTML = '<div class="no-buses">ã“ã®æ™‚é–“å¸¯ã®é‹è¡Œã¯ã‚ã‚Šã¾ã›ã‚“</div>';
                } else {
                    schedule.forEach(bus => {
                        const item = document.createElement('div');
                        item.className = 'bus-time';
                        const arrHour = bus.arr >= bus.dep ? currentHour : currentHour + 1;
                        item.innerHTML = `
                            <div class="departure">${String(currentHour).padStart(2, '0')}:${String(bus.dep).padStart(2, '0')}</div>
                            <div class="arrow">â†“</div>
                            <div class="arrival">${String(arrHour).padStart(2, '0')}:${String(bus.arr).padStart(2, '0')}</div>
                        `;
                        allBusesContainer.appendChild(item);
                    });
                }
            }
        }

        // å¹³æ—¥/åœŸæ—¥ç¥ã®åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll('.day-type-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.day-type-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentDayType = btn.dataset.type;
                updateTimetables();
            });
        });

        // åˆæœŸåŒ–
        function init() {
            updateCurrentTime();
            createHourTabs();
            
            // ç¾åœ¨ã®æ›œæ—¥ã«åŸºã¥ã„ã¦è‡ªå‹•é¸æŠ
            const now = new Date();
            const day = now.getDay();
            if (day === 0 || day === 6) {
                currentDayType = 'holiday';
                document.querySelector('[data-type="holiday"]').classList.add('active');
                document.querySelector('[data-type="weekday"]').classList.remove('active');
            }
            
            updateTimetables();
            
            // 1ç§’ã”ã¨ã«æ™‚åˆ»ã‚’æ›´æ–°
            setInterval(updateCurrentTime, 1000);
            
            // 30ç§’ã”ã¨ã«æ™‚åˆ»è¡¨ã‚’æ›´æ–°ï¼ˆç¾åœ¨æ™‚åˆ»ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã®ã¿ï¼‰
            setInterval(() => {
                if (showingRealtime) {
                    updateTimetables();
                }
            }, 30000);
        }

        init();
    </script>
</body>
</html>
